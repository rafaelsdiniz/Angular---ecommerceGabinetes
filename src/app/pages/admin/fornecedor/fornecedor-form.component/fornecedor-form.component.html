<div class="page-container">
  <div class="form-container">
    <!-- Simplified header without large title -->
    <div class="form-header">
      <button mat-icon-button class="back-btn" (click)="cancelar()">
        <mat-icon>arrow_back</mat-icon>
      </button>
      <h2 class="form-title">{{ isEdicao ? 'Editar Fornecedor' : 'Novo Fornecedor' }}</h2>
    </div>

    <!-- Loading State -->
    <div *ngIf="carregando" class="loading-state">
      <mat-spinner diameter="48"></mat-spinner>
    </div>

    <!-- Form -->
    <div *ngIf="!carregando" class="form-card">
      <form (ngSubmit)="salvar()" #fornecedorForm="ngForm" novalidate>
        
        <!-- Nome -->
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Nome</mat-label>
          <input 
            matInput 
            type="text" 
            [(ngModel)]="fornecedor.nome" 
            name="nome" 
            required
            placeholder="Ex: Fornecedora XYZ Ltda">
          <mat-icon matPrefix>business</mat-icon>
          <mat-error *ngIf="fornecedorForm.submitted && !fornecedor.nome">
            Campo obrigat贸rio
          </mat-error>
        </mat-form-field>

        <!-- Email -->
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Email</mat-label>
          <input 
            matInput 
            type="email" 
            [(ngModel)]="fornecedor.email" 
            name="email" 
            required
            placeholder="contato@fornecedor.com">
          <mat-icon matPrefix>email</mat-icon>
          <mat-error *ngIf="fornecedorForm.submitted && !fornecedor.email">
            Campo obrigat贸rio
          </mat-error>
        </mat-form-field>

        <!-- Telefone -->
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Telefone</mat-label>
          <input 
            matInput 
            type="tel" 
            [(ngModel)]="fornecedor.telefone" 
            name="telefone" 
            required
            placeholder="(11) 9999-9999">
          <mat-icon matPrefix>phone</mat-icon>
          <mat-error *ngIf="fornecedorForm.submitted && !fornecedor.telefone">
            Campo obrigat贸rio
          </mat-error>
        </mat-form-field>

        <!-- CNPJ -->
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>CNPJ</mat-label>
          <input 
            matInput 
            type="text" 
            [(ngModel)]="fornecedor.cnpj" 
            name="cnpj" 
            required
            placeholder="00.000.000/0000-00">
          <mat-icon matPrefix>card_giftcard</mat-icon>
          <mat-error *ngIf="fornecedorForm.submitted && !fornecedor.cnpj">
            Campo obrigat贸rio
          </mat-error>
        </mat-form-field>

        <!-- Error message -->
        <div *ngIf="erro" class="error-alert">
          <mat-icon>error_outline</mat-icon>
          <span>{{ erro }}</span>
        </div>

        <!-- Actions -->
        <div class="form-actions">
          <button 
            mat-stroked-button 
            type="button" 
            class="cancel-btn" 
            (click)="cancelar()"
            [disabled]="salvando">
            Cancelar
          </button>
          <button 
            mat-flat-button 
            type="submit" 
            class="save-btn"
            [disabled]="salvando">
            <mat-spinner *ngIf="salvando" diameter="20" class="btn-spinner"></mat-spinner>
            <span *ngIf="!salvando">{{ isEdicao ? 'Salvar' : 'Criar' }}</span>
            <span *ngIf="salvando">Salvando...</span>
          </button>
        </div>

      </form>
    </div>
  </div>
</div>
