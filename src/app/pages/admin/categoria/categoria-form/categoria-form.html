<div class="page-container">
  <div class="form-container">
    <!-- Simplified header without large title -->
    <div class="form-header">
      <button mat-icon-button class="back-btn" (click)="cancelar()">
        <mat-icon>arrow_back</mat-icon>
      </button>
      <h2 class="form-title">{{ isEdicao ? 'Editar Categoria' : 'Nova Categoria' }}</h2>
    </div>

    <!-- Loading State -->
    <div *ngIf="carregando" class="loading-state">
      <mat-spinner diameter="48"></mat-spinner>
    </div>

    <!-- Form -->
    <div *ngIf="!carregando" class="form-card">
      <form (ngSubmit)="salvar()" #categoriaForm="ngForm" novalidate>
        
        <!-- Nome -->
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Nome</mat-label>
          <input 
            matInput 
            type="text" 
            [(ngModel)]="categoria.nome" 
            name="nome" 
            required
            placeholder="Ex: Gabinetes Gamer">
          <mat-icon matPrefix>label</mat-icon>
          <mat-error *ngIf="categoriaForm.submitted && !categoria.nome">
            Campo obrigatório
          </mat-error>
        </mat-form-field>

        <!-- Descrição -->
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Descrição</mat-label>
          <textarea 
            matInput 
            [(ngModel)]="categoria.descricao" 
            name="descricao" 
            rows="4"
            required
            placeholder="Descreva a categoria...">
          </textarea>
          <mat-icon matPrefix>notes</mat-icon>
          <mat-error *ngIf="categoriaForm.submitted && !categoria.descricao">
            Campo obrigatório
          </mat-error>
        </mat-form-field>

        <!-- Error message -->
        <div *ngIf="erro" class="error-alert">
          <mat-icon>error_outline</mat-icon>
          <span>{{ erro }}</span>
        </div>

        <!-- Actions -->
        <div class="form-actions">
          <button 
            mat-stroked-button 
            type="button" 
            class="cancel-btn" 
            (click)="cancelar()"
            [disabled]="salvando">
            Cancelar
          </button>
          <button 
            mat-flat-button 
            type="submit" 
            class="save-btn"
            [disabled]="salvando">
            <mat-spinner *ngIf="salvando" diameter="20" class="btn-spinner"></mat-spinner>
            <span *ngIf="!salvando">{{ isEdicao ? 'Salvar' : 'Criar' }}</span>
            <span *ngIf="salvando">Salvando...</span>
          </button>
        </div>

      </form>
    </div>
  </div>
</div>
